Patch by Robert Scheck <robert@fedoraproject.org> for z-push >= 1.5.5, that
changes the original paths from Z-Push upstream to Fedora compliant ones.

--- z-push-1.5.5/debug.php		2010-11-19 22:20:24.000000000 +0100
+++ z-push-1.5.5/debug.php.zarafa	2011-09-18 03:13:32.000000000 +0200
@@ -57,7 +57,7 @@
 function debugLog($message) {
     global $auth_user;
     $user = (isset($auth_user))?"[". $auth_user ."] ":"";
-    @$fp = fopen(BASE_PATH . "/debug.txt","a");
+    @$fp = fopen("/var/lib/zarafa-z-push/debug.txt","a");
     @$date = strftime("%x %X");
     @fwrite($fp, "$date [". getmypid() ."] ". $user . "$message\n");
     @fclose($fp);
--- z-push-1.5.5/config.php		2011-03-18 20:22:53.000000000 +0100
+++ z-push-1.5.5/config.php.zarafa	2011-09-18 03:17:00.000000000 +0200
@@ -40,10 +40,8 @@
 *
 * Consult LICENSE file for details
 ************************************************/
-    // Defines the default time zone
-    if (function_exists("date_default_timezone_set")){
-        date_default_timezone_set("Europe/Amsterdam");
-    }
+    // Defines the default time zone, change e.g. to "Europe/London" if necessary
+    define('TIMEZONE', '');
 
     // Defines the base path on the server, terminated by a slash
     define('BASE_PATH', dirname($_SERVER['SCRIPT_FILENAME']) . "/");
@@ -57,7 +55,7 @@
                         "/usr/share/php5/" . PATH_SEPARATOR .
                         "/usr/share/pear/");
 
-    define('STATE_DIR', BASE_PATH.'/state');
+    define('STATE_DIR', '/var/lib/zarafa-z-push/state');
 
     // Try to set unlimited timeout
     define('SCRIPT_TIMEOUT', 0);
@@ -91,7 +89,7 @@
     //   SYNC_FILTERTYPE_1MONTH, SYNC_FILTERTYPE_3MONTHS, SYNC_FILTERTYPE_6MONTHS
     define('SYNC_FILTERTIME_MAX', SYNC_FILTERTYPE_ALL);
 
-    // The data providers that we are using (see configuration below)
+    // The data provider that we are using
     $BACKEND_PROVIDER = "BackendICS";
 
     // ************************
@@ -102,41 +100,6 @@
     define('MAPI_SERVER', 'file:///var/run/zarafa');
 
 
-    // ************************
-    //  BackendIMAP settings
-    // ************************
-
-    // Defines the server to which we want to connect
-    // recommended to use local servers only
-    define('IMAP_SERVER', 'localhost');
-    // connecting to default port (143)
-    define('IMAP_PORT', 143);
-    // best cross-platform compatibility (see http://php.net/imap_open for options)
-    define('IMAP_OPTIONS', '/notls/norsh');
-    // overwrite the "from" header if it isn't set when sending emails
-    // options: 'username'    - the username will be set (usefull if your login is equal to your emailaddress)
-    //        'domain'    - the value of the "domain" field is used
-    //        '@mydomain.com' - the username is used and the given string will be appended
-    define('IMAP_DEFAULTFROM', '');
-    // copy outgoing mail to this folder. If not set z-push will try the default folders
-    define('IMAP_SENTFOLDER', '');
-    // forward messages inline (default off - as attachment)
-    define('IMAP_INLINE_FORWARD', false);
-    // use imap_mail() to send emails (default) - off uses mail()
-    define('IMAP_USE_IMAPMAIL', true);
-
-
-    // ************************
-    //  BackendMaildir settings
-    // ************************
-    define('MAILDIR_BASE', '/tmp');
-    define('MAILDIR_SUBDIR', 'Maildir');
-
-    // **********************
-    //  BackendVCDir settings
-    // **********************
-    define('VCARDDIR_DIR', '/home/%u/.kde/share/apps/kabc/stdvcf');
-
     // Alternative backend to perform SEARCH requests (GAL search)
     // if an empty value is used, the default search functionality of the main backend is used
     // use 'SearchLDAP' to search in a LDAP directory (see backend/searchldap/config.php)
--- z-push-1.5.5/index.php		2011-08-04 19:32:40.000000000 +0200
+++ z-push-1.5.5/index.php.zarafa	2011-09-18 03:15:15.000000000 +0200
@@ -53,6 +53,15 @@
 include_once("compat.php");
 include_once("version.php");
 
+// Set timezone, see https://developer.berlios.de/mantis/view.php?id=479
+if(function_exists("date_default_timezone_set")) {
+    if(defined('TIMEZONE') ? constant('TIMEZONE') : false) {
+        date_default_timezone_set(TIMEZONE);
+    } else if(!ini_get('date.timezone')) {
+        date_default_timezone_set('Europe/Amsterdam');
+    }
+}
+
 // Attempt to set maximum execution time
 ini_set('max_execution_time', SCRIPT_TIMEOUT);
 set_time_limit(SCRIPT_TIMEOUT);
